<!DOCTYPE html>
<!--
Click nbfs://nbhost/SystemFileSystem/Templates/Licenses/license-default.txt to change this license
Click nbfs://nbhost/SystemFileSystem/Templates/Other/html.html to edit this template
-->
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>TODO supply a title</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    </head>
    <body>
        
        <div class="container">
            <form th:action="@{/Alumno/form}" method="post" th:object="${alumnoDireccion}" enctype="multipart/form-data">

                <input type="hidden" name="IdAlumno" th:field="*{Alumno.IdAlumno}">

                <div class="row mb-3 text-center">
                    <div class="col-md-3 mx-auto">
                        <div class="form/gorup">
                            <label for="imagenFile">Imagen:</label>
                            <input type="file" class="form-control" name="imagenFile" id="imagenFile">
                            <img src=" data:image/jpeg;base64,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">
                        </div>
                    </div>
                </div>
                
                
                <div class="row mb-3">
                    <div class="col-md-6">
                        <label for="NombreAlumno" class="form-label">Nombre</label>
                        <div class="input-group ">
                            <span class="input-group-text" id="basic-addon1"><i class="bi bi-person-fill"></i></span>
                            <input id="NombreAlumno" type="text" class="form-control" placeholder="Nombre" th:field="*{Alumno.Nombre}" onkeypress="return justLetters(event, this)">
                        </div>  
                        <span id="NombreAlumnoError" style="color: red"></span>
                        <span class="text-danger" th:if="${#fields.hasErrors('Alumno.Nombre')}" th:errors="*{Alumno.Nombre}"></span>
                    </div>
                    <div class="col-md-6">
                        <label for="ApellidoPaternoAlumno" class="form-label">Apellido Paterno</label>
                        <div class="input-group ">
                            <span class="input-group-text" id="basic-addon1"><i class="bi bi-person-fill"></i></span>
                            <input id="ApellidoPaternoAlumno" type="text" class="form-control" placeholder="Apellido Paterno" th:field="*{Alumno.ApellidoPaterno}" onkeypress="return justLettersAscii(event, this)">
                        </div>
                        <span id="ApellidoPaternoAlumnoError" style="color: red"></span>
                    </div>
                </div>
                <div class="row mb-3">
                    <div class="col-md-4">
                        <label for="UserNameAlumno" class="form-label">Username</label>
                        <div class="input-group ">
                            <span class="input-group-text" id="basic-addon1">@</span>
                            <input id="UserNameAlumno" type="text" class="form-control" placeholder="Username"  th:field="*{Alumno.UserName}">
                        </div>     
                    </div>
                    <div class="col-md-4">
                        <label for="FechaNacimientoAlumno" class="form-label">Fecha Nacimiento</label>
                        <div class="input-group ">
                            <span class="input-group-text" id="basic-addon1"><i class="bi bi-person-fill"></i></span>
                            <input id="FechaNacimientoAlumno" type="date" class="form-control" th:field="*{Alumno.FechaNacimiento}">
                        </div>     
                    </div>
                    <div class="col-md-4">
                        <label for="SemestreAlumno" class="form-label">Semestre</label>
                        <div class="input-group ">
                            <span class="input-group-text" id="basic-addon1"><i class="bi bi-person-fill"></i></span>
                            <select class="form-select" th:field="*{Alumno.Semestre.IdSemestre}">
                                <option value=0>Seleccione un semestre</option>
                                <option th:each="semestre : ${semestres}" th:value="${semestre.IdSemestre}" th:text="${semestre.Nombre}"></option>
                            </select>
                            <!--<input id="SemestreAlumno" type="text" class="form-control" placeholder="Semestre" th:field="*{Alumno.Semestre.IdSemestre}">-->
                        </div>     
                    </div>
                </div>

                <div class="row mb-3">
                    <div class="col-md-6">
                        <label  class="form-label">Contraseña</label>
                        <div class="input-group ">
                            <span class="input-group-text" id="basic-addon1">@</span>
                            <input type="text" class="form-control" placeholder="Contraseña" >
                        </div>     
                    </div>

                </div>
                <hr>


                <div class="col-md-3">
                    <label for="ColoniaAlumno" class="form-label">Colonia</label>
                    <div class="input-group ">
                        <span class="input-group-text" id="basic-addon1"><i class="bi bi-person-fill"></i></span>
                        <input id="ColoniaAlumno" type="text" class="form-control" placeholder="Colonia" th:field="*{Direccion.Colonia.IdColonia}">
                    </div>     
                </div>

                <div class="col-md-4">
                    <label for="EstadoAlumno" class="form-label">Estado</label>
                    <div class="input-group ">
                        <span class="input-group-text" id="basic-addon1"><i class="bi bi-person-fill"></i></span>
                        <select id="ddlEstado" class="form-select" th:field="*{Direccion.Colonia.Municipio.Estado.IdEstado}">
                            <option value=0>Seleccione un estado</option>
                            <option th:each="estado : ${estados}" th:value="${estado.IdEstado}" th:text="${estado.Nombre}"></option>
                        </select>
                        <!--<input id="SemestreAlumno" type="text" class="form-control" placeholder="Semestre" th:field="*{Alumno.Semestre.IdSemestre}">-->
                    </div>     
                </div>
                
                <div class="col-md-4">
                    <label for="MunicipioAlumno" class="form-label">Municipio</label>
                    <div class="input-group ">
                        <span class="input-group-text" id="basic-addon1"><i class="bi bi-person-fill"></i></span>
                        <select id="ddlMunicipio" class="form-select" th:field="*{Direccion.Colonia.Municipio.IdMunicipio}">
                            <option value=0>Seleccione un municipio</option>
                            <option th:each="municipio : ${municipios}" th:value="${municipio.IdMunicipio}" th:text="${municipio.Nombre}"></option>
                        </select>
                        <!--<input id="SemestreAlumno" type="text" class="form-control" placeholder="Semestre" th:field="*{Alumno.Semestre.IdSemestre}">-->
                    </div>     
                </div>
                
                <div class="col-md-4">
                    <label for="ColoniaAlumno" class="form-label">Colonia</label>
                    <div class="input-group ">
                        <span class="input-group-text" id="basic-addon1"><i class="bi bi-person-fill"></i></span>
                        <select id="ddlColonia" class="form-select" >
                            <option value=0>Seleccione una colonia</option>
                        </select>
                        <!--<input id="SemestreAlumno" type="text" class="form-control" placeholder="Semestre" th:field="*{Alumno.Semestre.IdSemestre}">-->
                    </div>     
                </div>
                
                <div class="col-md-6">
                        <label  class="form-label">Codigo Postal</label>
                        <div class="input-group ">
                            <span class="input-group-text" id="basic-addon1">CP</span>
                            <input id="CodigoPostalAlumno" type="text" class="form-control" placeholder="01650" >
                        </div>     
                    </div>
                <!--                <button class="btn btn-success" type="submit"> Agregar</button>-->

                <button th:if="*{Alumno.IdAlumno == 0}" class="btn btn-success" type="submit"> Agregar</button>
                <button th:unless="*{Alumno.IdAlumno == 0}" class="btn btn-warning" type="submit"> Actualiza</button>

                <button th:text="*{Alumno.IdAlumno == 0 ? 'Agregar Ternario' : 'Actualizar ternario'}" class="btn btn-success" type="submit"> Actualiza</button>



        </div>




        <br/>


    </form>

</div>
<script>
    function justLetters(event, elemento) {
        var regEx = /^[a-zA-Z]+$/;
        var key = event.key;
        var spanError = document.getElementById(elemento.id + 'Error');

        if (key.match(regEx)) {
            spanError.innerHTML = "";
            return true;
        } else {
            spanError.innerHTML = "Solo letras";
            return false;
        }
    }

    function justLettersAscii(event, elemento) {
        var keyCode = event.keyCode || event.which;
        var spanError = document.getElementById(elemento.id + 'Error');

        if ((keyCode >= 65 && keyCode <= 90) || (keyCode >= 97 && keyCode <= 122)) {
            spanError.innerHTML = "";
            return true;
        } else {
            spanError.innerHTML = "Solo letras";
            return false;
        }
    }

    $(document).ready(function () {
        console.log("Hola desde js");

        $("#ddlEstado").change(function () {
            console.log("Cambio el estado")
            $.ajax({
                type: "GET",
                url: "/Alumno/GetMunicipioByEstado/" + document.getElementById("ddlEstado").value,
                datatype: "json",
                success: function (data, textStatus, jqXHR) {
                    console.log(textStatus);
                    $("#ddlMunicipio").empty();
                    $("#ddlMunicipio").append('<option value=0>Selecciona un </option>')
                    $.each(data.objects, function(i, municipio){
                        $("#ddlMunicipio").append('<option value='+ municipio.idMunicipio + ' data-cp=1 >'+municipio.nombre+'</option>')
                    });
        
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert("Problemas :c")
                }
            });
        });
        
        
        $("#ddlMunicipio").change(function () {
            console.log("Cambio el estado")
            $.ajax({
                type: "GET",
                url: "/Alumno/GetColoniaByMunicipio/" + document.getElementById("ddlMunicipio").value,
                datatype: "json",
                success: function (data, textStatus, jqXHR) {
                    console.log(textStatus);
                    $("#ddlColonia").empty();
                    $("#ddlColonia").append('<option value=0>Selecciona un colonia </option>')
                    $.each(data.objects, function(i, colonia){
                        $("#ddlColonia").append('<option value='+ colonia.idColonia + ' data-cp="' + colonia.codigoPostal + '">'+colonia.nombre+'</option>')
                    });
        
                },
                error: function (jqXHR, textStatus, errorThrown) {
                    alert("Problemas :c")
                }
            });
        });
        
        $("#ddlColonia").change(function (){
            $("#CodigoPostalAlumno").val($("#ddlColonia option:selected").data("cp"));
        })
    });

</script>
</body>
</html>


<!--funcion-->